# install using pip:        pip install scikit-image
#

import numpy as np
import matplotlib.pyplot as plt
import scipy.ndimage.morphology as morphology
import scipy.ndimage as ndimage


def display(data, title = "", n = 1):
    fig = plt.gcf()
    subPlot = fig.add_subplot(1,2,n)
    subPlot.set_title(title)
    plt.imshow(data, interpolation = "none", cmap = "Greys")
    return fig

data = np.array([ 
        [1,1,1,1,0,1,1,1,1],
        [1,1,1,1,0,1,0,0,1],
        [1,1,1,1,0,1,0,0,1],
        [1,1,0,0,0,1,1,1,1],
        [0,0,0,0,0,0,0,0,0],
        [1,1,1,1,0,0,1,1,1],
        [0,1,0,1,0,0,1,0,1],
        [1,1,0,1,0,0,1,0,1],
        [1,1,1,1,1,0,1,1,1],
         ])
#data = np.asarray( img, dtype="int32" )
display(data, "raw image", 1)
# display( np.invert(data), "inverted image")

# scipy.ndimage.morphology.binary_fill_holes(input, structure=None, output=None, origin=0)
filled = morphology.binary_fill_holes(data)
labels, numberOfObjects = ndimage.label(filled)
print numberOfObjects
print labels
fig = display(labels, "filled image", 2)
fig.canvas.set_window_title("filling images")
plt.show()   
