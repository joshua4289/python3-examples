from threading import Thread
from threading import Lock

# 3 threads increment 2 counts ...
# count1 is unprotected
# count2 is protected
def countIt():
    global count1, count2
    for i in range(0, 1000000):
        count1 += 1
        lock.acquire()
        count2 += 1
        lock.release()

    
lock = Lock()
count1 = 0
count2 = 0

t1 = Thread(target = countIt).start()
t2 = Thread(target = countIt).start()
t3 = Thread(target = countIt).start()

t1.join()
t2.join()
t3.join()

print "count1: " + str(count1)
print "count2: " + str(count2)
