############################################################
#
#    decorators
#
############################################################


def toggleable(decorator):
    def enhance(fn):
        def inner(x):
            if decorator.enabled:
                return decorator(fn)(x)
            else:
                return fn(x)
        return inner
    def enable():
        decorator.enabled = True
    def disable():
        decorator.enabled = False
    enhance.enable = enable
    enhance.disable = disable
    enable()
    return enhance

# @toggleable
def trace(fn):
    def enhance(x):
        print "calling " + fn.func_name + "(" + str(x) + ")"
        return fn(x)
    return enhance
    

# @trace
def square(x): 
    return x * x

    
print toggleable(trace)(square)(4)
toggleable(trace).disable()
print toggleable(trace)(square)(5)
toggleable(trace).enable()
print toggleable(trace)(square)(6)


